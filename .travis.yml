language: go
go:
  - stable
  - master

matrix:
  allow_failures:
    - go: master

install:
  - sudo apt-get install libegl1-mesa-dev libusb-1.0-0-dev libfreenect-dev
  - go get -u github.com/golang/dep/cmd/dep
  - go get -u github.com/golang/lint/golint

before_script:
  - dep ensure
script:
  - gofmt -s -d .
  - go build ./cmd/shady/
  - go test -test.v -race ./...
  - go vet ./...
  - golint -min_confidence 0.3 $(go list ./...)
